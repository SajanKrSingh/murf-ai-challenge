<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zarex</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .record-btn.recording { animation: pulse 2s infinite; }
    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); }
      70% { transform: scale(1.05); box-shadow: 0 0 0 25px rgba(220, 53, 69, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
    }
    #chat-log::-webkit-scrollbar { width: 8px; }
    #chat-log::-webkit-scrollbar-track { background: #1a202c; }
    #chat-log::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
    .message {
      padding: 0.75rem 1rem; border-radius: 1rem; margin-bottom: 0.75rem;
      max-width: 80%; line-height: 1.5; word-wrap: break-word;
    }
    .user {
      background-color: #2563eb; color: white;
      border-bottom-right-radius: 0.25rem; align-self: flex-end;
    }
    .assistant {
      background-color: #4a5568; color: white;
      border-bottom-left-radius: 0.25rem; align-self: flex-start;
    }
    /* Modal styles */
    .modal-backdrop {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.6);
        /* Initially hidden */
        display: none; 
        justify-content: center; align-items: center; z-index: 50;
    }
    .modal-content {
        background-color: #2d3748; padding: 2rem;
        border-radius: 1rem; width: 90%; max-width: 500px;
    }
    .api-key-input {
        background-color: #1a202c; border: 1px solid #4a5568;
        border-radius: 0.375rem; padding: 0.75rem;
        color: white; width: 100%; margin-bottom: 1rem;
    }
  </style>
</head>

<body class="bg-gray-900 text-white antialiased">

  <div id="api-key-modal" class="modal-backdrop">
    <div class="modal-content">
      <h2 class="text-2xl font-bold mb-4 text-center">Enter API Keys</h2>
      <input type="password" id="murf-key" class="api-key-input" placeholder="MURF_API_KEY*">
      <input type="password" id="assemblyai-key" class="api-key-input" placeholder="ASSEMBLYAI_API_KEY*">
      <input type="password" id="gemini-key" class="api-key-input" placeholder="GEMINI_API_KEY*">
      <input type="password" id="serpapi-key" class="api-key-input" placeholder="SERPAPI_API_KEY (Optional)">
      <button id="save-keys-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">
        Save and Start
      </button>
      <p class="text-xs text-gray-400 mt-2 text-center">* Required</p>
    </div>
  </div>

  <div class="container mx-auto flex flex-col items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-2xl h-[80vh] flex flex-col bg-gray-800 rounded-2xl shadow-2xl p-6">
      <div class="chat-header flex justify-between items-center border-b border-gray-700 pb-4 mb-4">
        <div class="flex-1"></div> <div class="text-center flex-1">
            <h4 class="text-2xl font-bold text-white">Zarex</h4>
            <p class="text-muted text-gray-400 text-sm">Your Personal AI Assistant</p>
        </div>
        <div class="flex-1 flex justify-end">
            <button id="settings-btn" class="text-gray-400 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311a1.464 1.464 0 0 1-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413-1.4-2.397 0-2.81l.34-.1a1.464 1.464 0 0 1 .872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                </svg>
            </button>
        </div>
      </div>
      <div id="chat-log" class="flex-grow flex flex-col space-y-2 overflow-y-auto pr-2"></div>
      <div class="chat-input-container text-center pt-4 mt-4 border-t border-gray-700">
        <button id="recordBtn" disabled class="record-btn w-20 h-20 rounded-full bg-gray-500 flex items-center justify-center transition-all duration-300 ease-in-out cursor-not-allowed">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-mic-fill" viewBox="0 0 16 16">
            <path d="M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z" />
            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z" />
          </svg>
        </button>
        <div id="statusDisplay" class="text-gray-400 h-6 mt-3">Click ⚙️ to enter API keys.</div>
      </div>
    </div>
  </div>
  <script src="/static/script.js"></script>
</body>
</html>